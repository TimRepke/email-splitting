{
  "wrapper": "plaintext",
  "text": "\n: I have some custom code in solr (which is not of good quality for\n: contributing back) so I need to setup my own continuous build solution. I\n: tried jenkins and was hoping that ant build (ant clean compile) in Execute\n: Shell textbox will work, but I am stuck at this ivy-fail error:\n: \n: To work around it, I also added another step in the 'Execute Shell' (ant\n: ivy-bootstrap), which succeeds but 'ant clean compile' still fails with the\n: following error. I guess that I am not alone in doing this so there should\n: be some standard work around for this.\n\nThe ivy bootstraping is really designed to to be for developers to setup \ntheir ~/.ant/lib directory -- IIRC most of the jenkins build servers out \nthere don't use it as part of their job, they instead of install ivy once \nwhen setting up the jenkins server (in the home dir of the jenkins user)\n\nI suspect the error you are running into may have to do with directory \npermissions of your jenkins server not letting the job write to the \njenkins home dir?  or some other path/permissions incompatibility.\n\nYou could consider following the instruction in the ivy-fail warning to \nhave ivy-bootstrap put the ivy jar files in a custom path inside hte \nworkspace of your job, and then use \"-lib\" to point at that directory when \nrunning solr tests.\n\nAlternatively, my preference for setting up jenkins jobs these days is to \nuse docker, and let all the per-job activity (inlcuding the git co of \nlucene and the ivy bootstraping) happen inside the docker container.\n\nFor example: this is a set of scripts/configs i use for an \"ondemand\" \njenkins job i have, that let's me checkout arbitrary branches/commits of \nlucene-solr, apply arbitrary patches, and the nrun arbitrary build \ncommands (ie: ant test) using arbitrary JDK versions -- all configured at \nbuild time with build params...\n\nhttps://github.com/hossman/solr-jenkins-docker-tester\n\n\n: \n: ivy-fail:\n:      [echo]\n:      [echo]      This build requires Ivy and Ivy could not be found in\n: your ant classpath.\n:      [echo]\n:      [echo]      (Due to classpath issues and the recursive nature of\n: the Lucene/Solr\n:      [echo]      build system, a local copy of Ivy can not be used an\n: loaded dynamically\n:      [echo]      by the build.xml)\n:      [echo]\n:      [echo]      You can either manually install a copy of Ivy 2.3.0\n: in your ant classpath:\n:      [echo]        http://ant.apache.org/manual/install.html#optionalTasks\n:      [echo]\n:      [echo]      Or this build file can do it for you by running the\n: Ivy Bootstrap target:\n:      [echo]        ant ivy-bootstrap\n:      [echo]\n:      [echo]      Either way you will only have to install Ivy one time.\n:      [echo]\n:      [echo]      'ant ivy-bootstrap' will install a copy of Ivy into\n: your Ant User Library:\n:      [echo]        /home/jenkins/.ant/lib\n:      [echo]\n:      [echo]      If you would prefer, you can have it installed into\n: an alternative\n:      [echo]      directory using the\n: \"-Divy_install_path=/some/path/you/choose\" option,\n:      [echo]      but you will have to specify this path every time you\n: build Lucene/Solr\n:      [echo]      in the future...\n:      [echo]        ant ivy-bootstrap -Divy_install_path=/some/path/you/choose\n:      [echo]        ...\n:      [echo]        ant -lib /some/path/you/choose clean compile\n:      [echo]        ...\n:      [echo]        ant -lib /some/path/you/choose clean compile\n:      [echo]\n:      [echo]      If you have already run ivy-bootstrap, and still get\n: this message, please\n:      [echo]      try using the \"--noconfig\" option when running ant,\n: or editing your global\n:      [echo]      ant config to allow the user lib to be loaded.  See\n: the wiki for more details:\n:      [echo]\n: http://wiki.apache.org/lucene-java/DeveloperTips#Problems_with_Ivy.3F\n:      [echo]\n: \n\n-Hoss\nhttp://www.lucidworks.com/\n\n",
  "denotations": [
    {
      "id": 1,
      "start": 3830,
      "end": 3837,
      "text": "\n-Hoss\n",
      "type": "Body/Outro",
      "meta": null
    },
    {
      "id": 2,
      "start": 288,
      "end": 3865,
      "text": ": \n: To work around it, I also added another step in the 'Execute Shell' (ant\n: ivy-bootstrap), which succeeds but 'ant clean compile' still fails with the\n: following error. I guess that I am not alone in doing this so there should\n: be some standard work around for this.\n\nThe ivy bootstraping is really designed to to be for developers to setup \ntheir ~/.ant/lib directory -- IIRC most of the jenkins build servers out \nthere don't use it as part of their job, they instead of install ivy once \nwhen setting up the jenkins server (in the home dir of the jenkins user)\n\nI suspect the error you are running into may have to do with directory \npermissions of your jenkins server not letting the job write to the \njenkins home dir?  or some other path/permissions incompatibility.\n\nYou could consider following the instruction in the ivy-fail warning to \nhave ivy-bootstrap put the ivy jar files in a custom path inside hte \nworkspace of your job, and then use \"-lib\" to point at that directory when \nrunning solr tests.\n\nAlternatively, my preference for setting up jenkins jobs these days is to \nuse docker, and let all the per-job activity (inlcuding the git co of \nlucene and the ivy bootstraping) happen inside the docker container.\n\nFor example: this is a set of scripts/configs i use for an \"ondemand\" \njenkins job i have, that let's me checkout arbitrary branches/commits of \nlucene-solr, apply arbitrary patches, and the nrun arbitrary build \ncommands (ie: ant test) using arbitrary JDK versions -- all configured at \nbuild time with build params...\n\nhttps://github.com/hossman/solr-jenkins-docker-tester\n\n\n: \n: ivy-fail:\n:      [echo]\n:      [echo]      This build requires Ivy and Ivy could not be found in\n: your ant classpath.\n:      [echo]\n:      [echo]      (Due to classpath issues and the recursive nature of\n: the Lucene/Solr\n:      [echo]      build system, a local copy of Ivy can not be used an\n: loaded dynamically\n:      [echo]      by the build.xml)\n:      [echo]\n:      [echo]      You can either manually install a copy of Ivy 2.3.0\n: in your ant classpath:\n:      [echo]        http://ant.apache.org/manual/install.html#optionalTasks\n:      [echo]\n:      [echo]      Or this build file can do it for you by running the\n: Ivy Bootstrap target:\n:      [echo]        ant ivy-bootstrap\n:      [echo]\n:      [echo]      Either way you will only have to install Ivy one time.\n:      [echo]\n:      [echo]      'ant ivy-bootstrap' will install a copy of Ivy into\n: your Ant User Library:\n:      [echo]        /home/jenkins/.ant/lib\n:      [echo]\n:      [echo]      If you would prefer, you can have it installed into\n: an alternative\n:      [echo]      directory using the\n: \"-Divy_install_path=/some/path/you/choose\" option,\n:      [echo]      but you will have to specify this path every time you\n: build Lucene/Solr\n:      [echo]      in the future...\n:      [echo]        ant ivy-bootstrap -Divy_install_path=/some/path/you/choose\n:      [echo]        ...\n:      [echo]        ant -lib /some/path/you/choose clean compile\n:      [echo]        ...\n:      [echo]        ant -lib /some/path/you/choose clean compile\n:      [echo]\n:      [echo]      If you have already run ivy-bootstrap, and still get\n: this message, please\n:      [echo]      try using the \"--noconfig\" option when running ant,\n: or editing your global\n:      [echo]      ant config to allow the user lib to be loaded.  See\n: the wiki for more details:\n:      [echo]\n: http://wiki.apache.org/lucene-java/DeveloperTips#Problems_with_Ivy.3F\n:      [echo]\n: \n\n-Hoss\nhttp://www.lucidworks.com/\n\n",
      "type": "Body",
      "meta": null
    }
  ],
  "meta": {},
  "id": "train/train_6523"
}