{
  "wrapper": "plaintext",
  "text": "Hi,\n\nI upgraded to solr 7 today and i am seeing tonnes of following errors for\nvarious fields.\n\no.a.s.h.RequestHandlerBase org.apache.solr.common.SolrException: Exception\nwriting document id file_38810000549 to the index; possible analysis error:\nstartOffset must be non-negative, and endOffset must be >= startOffset, and\noffsets must not go backwards startOffset=6,endOffset=8,lastStartOffset=9\nfor field 'name_combined'\n\nWe don't have a lot of custom code for analysis at indexing time, so my\nsuspicion is on the schema definition, can someone suggest how should I\nstart debugging this?\n\n    <field name=\"file_content_en\"  type=\"text_stemming_en\" indexed=\"true\"\nstored=\"true\" omitPositions=\"false\"/>\n      <analyzer type=\"index\">\n        <charFilter\nclass=\"org.apache.lucene.analysis.icu.ICUNormalizer2CharFilterFactory\"\nname=\"nfkc\" mode=\"compose\"/>\n        <tokenizer class=\"solr.WhitespaceTokenizerFactory\"/>\n        <filter class=\"solr.WordDelimiterGraphFilterFactory\"\ngenerateWordParts=\"1\" generateNumberParts=\"1\" catenateWords=\"1\"\ncatenateNumbers=\"1\" catenateAll=\"0\" preserveOriginal=\"1\"\nsplitOnCaseChange=\"0\" splitOnNumerics=\"0\" stemEnglishPossessive=\"1\"/>\n        <filter class=\"solr.WordDelimiterGraphFilterFactory\"\ngenerateWordParts=\"1\" generateNumberParts=\"1\" catenateWords=\"1\"\ncatenateNumbers=\"1\" catenateAll=\"0\" preserveOriginal=\"1\"\nsplitOnCaseChange=\"1\" splitOnNumerics=\"1\" stemEnglishPossessive=\"1\"/>\n        <filter class=\"solr.PatternReplaceFilterFactory\"\npattern=\"^(\\p{Punct}*)(.*?)(\\p{Punct}*)$\" replacement=\"$2\"/>\n        <filter class=\"solr.StopFilterFactory\" ignoreCase=\"true\"\nwords=\"stopwords.txt\"/>\n        <filter class=\"solr.LowerCaseFilterFactory\"/>\n        <filter class=\"solr.ASCIIFoldingFilterFactory\"/>\n        <filter class=\"solr.SnowballPorterFilterFactory\" />\n        <filter class=\"solr.RemoveDuplicatesTokenFilterFactory\"/>\n        <filter class=\"solr.LimitTokenCountFilterFactory\"\nmaxTokenCount=\"10000\" consumeAllTokens=\"false\"/>\n        <filter class=\"solr.LengthFilterFactory\" min=\"1\" max=\"255\"/>\n      </analyzer>\n\n\n    <field name=\"name_combined\" type=\"text_ngram\" indexed=\"true\"\nstored=\"false\" multiValued=\"true\" omitPositions=\"true\"/>\n      <analyzer type=\"index\">\n        <charFilter\nclass=\"org.apache.lucene.analysis.icu.ICUNormalizer2CharFilterFactory\"\nname=\"nfkc\" mode=\"compose\"/>\n        <tokenizer class=\"solr.WhitespaceTokenizerFactory\"/>\n        <filter class=\"solr.WordDelimiterGraphFilterFactory\"\ngenerateWordParts=\"1\" generateNumberParts=\"1\" catenateWords=\"1\"\ncatenateNumbers=\"1\" catenateAll=\"0\" preserveOriginal=\"1\"\nsplitOnCaseChange=\"0\" splitOnNumerics=\"0\" stemEnglishPossessive=\"1\"/>\n        <filter class=\"solr.WordDelimiterGraphFilterFactory\"\ngenerateWordParts=\"1\" generateNumberParts=\"1\" catenateWords=\"1\"\ncatenateNumbers=\"1\" catenateAll=\"0\" preserveOriginal=\"1\"\nsplitOnCaseChange=\"1\" splitOnNumerics=\"1\" stemEnglishPossessive=\"1\"/>\n        <filter class=\"solr.PatternReplaceFilterFactory\"\npattern=\"^(\\p{Punct}*)(.*?)(\\p{Punct}*)$\" replacement=\"$2\"/>\n        <filter class=\"solr.StopFilterFactory\" ignoreCase=\"true\"\nwords=\"stopwords.txt\"/>\n        <filter class=\"solr.LowerCaseFilterFactory\"/>\n        <filter class=\"solr.ASCIIFoldingFilterFactory\"/>\n        <filter class=\"solr.EdgeNGramFilterFactory\" minGramSize=\"1\"\nmaxGramSize=\"255\"/>\n        <filter class=\"solr.RemoveDuplicatesTokenFilterFactory\"/>\n        <filter class=\"solr.LimitTokenCountFilterFactory\"\nmaxTokenCount=\"10000\" consumeAllTokens=\"false\"/>\n        <filter class=\"solr.LengthFilterFactory\" min=\"1\" max=\"255\"/>\n      </analyzer>\n\n\nThanks\nnawab\n\n",
  "denotations": [
    {
      "id": 1,
      "start": 0,
      "end": 4,
      "text": "Hi,\n",
      "type": "Body/Intro",
      "meta": null
    },
    {
      "id": 2,
      "start": 3562,
      "end": 3576,
      "text": "\nThanks\nnawab\n",
      "type": "Body/Outro",
      "meta": null
    },
    {
      "id": 3,
      "start": 0,
      "end": 3577,
      "text": "Hi,\n\nI upgraded to solr 7 today and i am seeing tonnes of following errors for\nvarious fields.\n\no.a.s.h.RequestHandlerBase org.apache.solr.common.SolrException: Exception\nwriting document id file_38810000549 to the index; possible analysis error:\nstartOffset must be non-negative, and endOffset must be >= startOffset, and\noffsets must not go backwards startOffset=6,endOffset=8,lastStartOffset=9\nfor field 'name_combined'\n\nWe don't have a lot of custom code for analysis at indexing time, so my\nsuspicion is on the schema definition, can someone suggest how should I\nstart debugging this?\n\n    <field name=\"file_content_en\"  type=\"text_stemming_en\" indexed=\"true\"\nstored=\"true\" omitPositions=\"false\"/>\n      <analyzer type=\"index\">\n        <charFilter\nclass=\"org.apache.lucene.analysis.icu.ICUNormalizer2CharFilterFactory\"\nname=\"nfkc\" mode=\"compose\"/>\n        <tokenizer class=\"solr.WhitespaceTokenizerFactory\"/>\n        <filter class=\"solr.WordDelimiterGraphFilterFactory\"\ngenerateWordParts=\"1\" generateNumberParts=\"1\" catenateWords=\"1\"\ncatenateNumbers=\"1\" catenateAll=\"0\" preserveOriginal=\"1\"\nsplitOnCaseChange=\"0\" splitOnNumerics=\"0\" stemEnglishPossessive=\"1\"/>\n        <filter class=\"solr.WordDelimiterGraphFilterFactory\"\ngenerateWordParts=\"1\" generateNumberParts=\"1\" catenateWords=\"1\"\ncatenateNumbers=\"1\" catenateAll=\"0\" preserveOriginal=\"1\"\nsplitOnCaseChange=\"1\" splitOnNumerics=\"1\" stemEnglishPossessive=\"1\"/>\n        <filter class=\"solr.PatternReplaceFilterFactory\"\npattern=\"^(\\p{Punct}*)(.*?)(\\p{Punct}*)$\" replacement=\"$2\"/>\n        <filter class=\"solr.StopFilterFactory\" ignoreCase=\"true\"\nwords=\"stopwords.txt\"/>\n        <filter class=\"solr.LowerCaseFilterFactory\"/>\n        <filter class=\"solr.ASCIIFoldingFilterFactory\"/>\n        <filter class=\"solr.SnowballPorterFilterFactory\" />\n        <filter class=\"solr.RemoveDuplicatesTokenFilterFactory\"/>\n        <filter class=\"solr.LimitTokenCountFilterFactory\"\nmaxTokenCount=\"10000\" consumeAllTokens=\"false\"/>\n        <filter class=\"solr.LengthFilterFactory\" min=\"1\" max=\"255\"/>\n      </analyzer>\n\n\n    <field name=\"name_combined\" type=\"text_ngram\" indexed=\"true\"\nstored=\"false\" multiValued=\"true\" omitPositions=\"true\"/>\n      <analyzer type=\"index\">\n        <charFilter\nclass=\"org.apache.lucene.analysis.icu.ICUNormalizer2CharFilterFactory\"\nname=\"nfkc\" mode=\"compose\"/>\n        <tokenizer class=\"solr.WhitespaceTokenizerFactory\"/>\n        <filter class=\"solr.WordDelimiterGraphFilterFactory\"\ngenerateWordParts=\"1\" generateNumberParts=\"1\" catenateWords=\"1\"\ncatenateNumbers=\"1\" catenateAll=\"0\" preserveOriginal=\"1\"\nsplitOnCaseChange=\"0\" splitOnNumerics=\"0\" stemEnglishPossessive=\"1\"/>\n        <filter class=\"solr.WordDelimiterGraphFilterFactory\"\ngenerateWordParts=\"1\" generateNumberParts=\"1\" catenateWords=\"1\"\ncatenateNumbers=\"1\" catenateAll=\"0\" preserveOriginal=\"1\"\nsplitOnCaseChange=\"1\" splitOnNumerics=\"1\" stemEnglishPossessive=\"1\"/>\n        <filter class=\"solr.PatternReplaceFilterFactory\"\npattern=\"^(\\p{Punct}*)(.*?)(\\p{Punct}*)$\" replacement=\"$2\"/>\n        <filter class=\"solr.StopFilterFactory\" ignoreCase=\"true\"\nwords=\"stopwords.txt\"/>\n        <filter class=\"solr.LowerCaseFilterFactory\"/>\n        <filter class=\"solr.ASCIIFoldingFilterFactory\"/>\n        <filter class=\"solr.EdgeNGramFilterFactory\" minGramSize=\"1\"\nmaxGramSize=\"255\"/>\n        <filter class=\"solr.RemoveDuplicatesTokenFilterFactory\"/>\n        <filter class=\"solr.LimitTokenCountFilterFactory\"\nmaxTokenCount=\"10000\" consumeAllTokens=\"false\"/>\n        <filter class=\"solr.LengthFilterFactory\" min=\"1\" max=\"255\"/>\n      </analyzer>\n\n\nThanks\nnawab\n\n",
      "type": "Body",
      "meta": null
    }
  ],
  "meta": {},
  "id": "train/train_6385"
}