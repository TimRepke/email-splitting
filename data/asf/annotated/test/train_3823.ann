{
  "wrapper": "plaintext",
  "text": "Hi,\n\nI am *intermittently* seeing this error while doing spark-submit for spark\n2.0.2-scala 2.11 version.\n\nI see the same issue reported in\nhttps://issues.apache.org/jira/browse/SPARK-18343 and it seems to be\nRESOLVED.  I can run successfully most of the time though. Hence I'm unsure\nif it is because of any submodule version incorrectness?\n\nJun 22, 2017 11:01:15 PM org.apache.hadoop.mapred.Task taskCleanup\nINFO: Runnning cleanup for the task\nJun 22, 2017 11:01:15 PM org.apache.hadoop.metrics2.impl.MetricsSystemImpl\nstop\nINFO: Stopping MapTask metrics system...\nJun 22, 2017 11:01:15 PM org.apache.hadoop.metrics2.impl.MetricsSystemImpl\nstop\nINFO: MapTask metrics system stopped.\nJun 22, 2017 11:01:15 PM org.apache.hadoop.metrics2.impl.MetricsSystemImpl\nshutdown\nINFO: MapTask metrics system shutdown complete.\nJun 22, 2017 11:01:17 PM org.apache.hadoop.mapred.Task run\nINFO: Communication exception: java.io.IOException: The client is stopped\nat org.apache.hadoop.ipc.Client.getConnection(Client.java:1507)\nat org.apache.hadoop.ipc.Client.call(Client.java:1451)\nat org.apache.hadoop.ipc.Client.call(Client.java:1412)\nat\norg.apache.hadoop.ipc.WritableRpcEngine$Invoker.invoke(WritableRpcEngine.java:242)\nat com.sun.proxy.$Proxy9.ping(Unknown Source)\nat org.apache.hadoop.mapred.Task$TaskReporter.run(Task.java:767)\nat java.lang.Thread.run(Thread.java:748)\n\nJun 22, 2017 11:01:20 PM org.apache.hadoop.mapred.Task run\nINFO: Communication exception: java.io.IOException: The client is stopped\nat org.apache.hadoop.ipc.Client.getConnection(Client.java:1507)\nat org.apache.hadoop.ipc.Client.call(Client.java:1451)\nat org.apache.hadoop.ipc.Client.call(Client.java:1412)\nat\norg.apache.hadoop.ipc.WritableRpcEngine$Invoker.invoke(WritableRpcEngine.java:242)\nat com.sun.proxy.$Proxy9.ping(Unknown Source)\nat org.apache.hadoop.mapred.Task$TaskReporter.run(Task.java:767)\nat java.lang.Thread.run(Thread.java:748)\n\nJun 22, 2017 11:01:23 PM org.apache.hadoop.mapred.Task run\nINFO: Communication exception: java.io.IOException: The client is stopped\nat org.apache.hadoop.ipc.Client.getConnection(Client.java:1507)\nat org.apache.hadoop.ipc.Client.call(Client.java:1451)\nat org.apache.hadoop.ipc.Client.call(Client.java:1412)\nat\norg.apache.hadoop.ipc.WritableRpcEngine$Invoker.invoke(WritableRpcEngine.java:242)\nat com.sun.proxy.$Proxy9.ping(Unknown Source)\nat org.apache.hadoop.mapred.Task$TaskReporter.run(Task.java:767)\nat java.lang.Thread.run(Thread.java:748)\n\nJun 22, 2017 11:01:23 PM org.apache.hadoop.mapred.Task logThreadInfo\nINFO: Process Thread Dump: Communication exception\n12 active threads\nThread 35 (DestroyJavaVM):\n  State: RUNNABLE\n  Blocked count: 0\n  Waited count: 0\n  Stack:\nThread 33 (LeaseRenewer:kprasad@kprasad-ltm.internal.salesforce.com:8020):\n  State: TIMED_WAITING\n  Blocked count: 0\n  Waited count: 8\n  Stack:\n    java.lang.Thread.sleep(Native Method)\n    org.apache.hadoop.hdfs.LeaseRenewer.run(LeaseRenewer.java:444)\n    org.apache.hadoop.hdfs.LeaseRenewer.access$700(LeaseRenewer.java:71)\n    org.apache.hadoop.hdfs.LeaseRenewer$1.run(LeaseRenewer.java:304)\n    java.lang.Thread.run(Thread.java:748)\nThread 31 (IPC Client (1041365481) connection to\nkprasad-ltm.internal.salesforce.com/10.3.28.87:8020 from kprasad):\n  State: TIMED_WAITING\n  Blocked count: 2\n  Waited count: 3\n  Stack:\n    java.lang.Object.wait(Native Method)\n    org.apache.hadoop.ipc.Client$Connection.waitForWork(Client.java:933)\n    org.apache.hadoop.ipc.Client$Connection.run(Client.java:978)\nThread 29 (pool-5-thread-1):\n  State: TIMED_WAITING\n  Blocked count: 0\n  Waited count: 1\n  Stack:\n    java.lang.Thread.sleep(Native Method)\n    java.lang.Thread.sleep(Thread.java:340)\n    java.util.concurrent.TimeUnit.sleep(TimeUnit.java:386)\n\ngridforce.spark.delegate.SparkScriptRunner$KeepAliveThread.run(SparkScriptRunner.java:622)\n    java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\n    java.util.concurrent.FutureTask.run(FutureTask.java:266)\n\njava.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)\n\njava.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)\n\njava.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n\njava.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n    java.lang.Thread.run(Thread.java:748)\nThread 24 (org.apache.hadoop.hdfs.PeerCache@1c80e49b):\n  State: TIMED_WAITING\n  Blocked count: 0\n  Waited count: 23\n  Stack:\n    java.lang.Thread.sleep(Native Method)\n    org.apache.hadoop.hdfs.PeerCache.run(PeerCache.java:255)\n    org.apache.hadoop.hdfs.PeerCache.access$000(PeerCache.java:46)\n    org.apache.hadoop.hdfs.PeerCache$1.run(PeerCache.java:124)\n    java.lang.Thread.run(Thread.java:748)\nThread 22 (communication thread):\n  State: RUNNABLE\n  Blocked count: 20\n  Waited count: 63\n  Stack:\n    sun.management.ThreadImpl.getThreadInfo1(Native Method)\n    sun.management.ThreadImpl.getThreadInfo(ThreadImpl.java:178)\n    sun.management.ThreadImpl.getThreadInfo(ThreadImpl.java:139)\n\norg.apache.hadoop.util.ReflectionUtils.printThreadInfo(ReflectionUtils.java:168)\n\norg.apache.hadoop.util.ReflectionUtils.logThreadInfo(ReflectionUtils.java:223)\n    org.apache.hadoop.mapred.Task$TaskReporter.run(Task.java:785)\n    java.lang.Thread.run(Thread.java:748)\nThread 16 (process reaper):\n  State: TIMED_WAITING\n  Blocked count: 0\n  Waited count: 5\n  Stack:\n    sun.misc.Unsafe.park(Native Method)\n    java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)\n\njava.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)\n\njava.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:362)\n    java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:941)\n\njava.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1066)\n\njava.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1127)\n\njava.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n    java.lang.Thread.run(Thread.java:748)\nThread 14\n(org.apache.hadoop.fs.FileSystem$Statistics$StatisticsDataReferenceCleaner):\n  State: WAITING\n  Blocked count: 0\n  Waited count: 1\n  Waiting on java.lang.ref.ReferenceQueue$Lock@407a7f2a\n  Stack:\n    java.lang.Object.wait(Native Method)\n    java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:143)\n    java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:164)\n\norg.apache.hadoop.fs.FileSystem$Statistics$StatisticsDataReferenceCleaner.run(FileSystem.java:3060)\n    java.lang.Thread.run(Thread.java:748)\nThread 13 (IPC Parameter Sending Thread #0):\n  State: TIMED_WAITING\n  Blocked count: 0\n  Waited count: 31\n  Stack:\n    sun.misc.Unsafe.park(Native Method)\n    java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)\n\njava.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)\n\njava.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:362)\n    java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:941)\n\njava.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1066)\n\njava.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1127)\n\njava.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n    java.lang.Thread.run(Thread.java:748)\nThread 4 (Signal Dispatcher):\n  State: RUNNABLE\n  Blocked count: 0\n  Waited count: 0\n  Stack:\nThread 3 (Finalizer):\n  State: WAITING\n  Blocked count: 567\n  Waited count: 6\n  Waiting on java.lang.ref.ReferenceQueue$Lock@2cb2fc20\n  Stack:\n    java.lang.Object.wait(Native Method)\n    java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:143)\n    java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:164)\n    java.lang.ref.Finalizer$FinalizerThread.run(Finalizer.java:209)\nThread 2 (Reference Handler):\n  State: WAITING\n  Blocked count: 9\n  Waited count: 5\n  Waiting on java.lang.ref.Reference$Lock@4f4c4b1a\n  Stack:\n    java.lang.Object.wait(Native Method)\n    java.lang.Object.wait(Object.java:502)\n    java.lang.ref.Reference.tryHandlePending(Reference.java:191)\n    java.lang.ref.Reference$ReferenceHandler.run(Reference.java:153)\n\nJun 22, 2017 11:01:23 PM org.apache.hadoop.mapred.Task run\nWARNING: Last retry, killing attempt_1498171863687_0003_m_000000_0\n\n",
  "denotations": [
    {
      "id": 1,
      "start": 0,
      "end": 4,
      "text": "Hi,\n",
      "type": "Body/Intro",
      "meta": null
    },
    {
      "id": 2,
      "start": 0,
      "end": 8358,
      "text": "Hi,\n\nI am *intermittently* seeing this error while doing spark-submit for spark\n2.0.2-scala 2.11 version.\n\nI see the same issue reported in\nhttps://issues.apache.org/jira/browse/SPARK-18343 and it seems to be\nRESOLVED.  I can run successfully most of the time though. Hence I'm unsure\nif it is because of any submodule version incorrectness?\n\nJun 22, 2017 11:01:15 PM org.apache.hadoop.mapred.Task taskCleanup\nINFO: Runnning cleanup for the task\nJun 22, 2017 11:01:15 PM org.apache.hadoop.metrics2.impl.MetricsSystemImpl\nstop\nINFO: Stopping MapTask metrics system...\nJun 22, 2017 11:01:15 PM org.apache.hadoop.metrics2.impl.MetricsSystemImpl\nstop\nINFO: MapTask metrics system stopped.\nJun 22, 2017 11:01:15 PM org.apache.hadoop.metrics2.impl.MetricsSystemImpl\nshutdown\nINFO: MapTask metrics system shutdown complete.\nJun 22, 2017 11:01:17 PM org.apache.hadoop.mapred.Task run\nINFO: Communication exception: java.io.IOException: The client is stopped\nat org.apache.hadoop.ipc.Client.getConnection(Client.java:1507)\nat org.apache.hadoop.ipc.Client.call(Client.java:1451)\nat org.apache.hadoop.ipc.Client.call(Client.java:1412)\nat\norg.apache.hadoop.ipc.WritableRpcEngine$Invoker.invoke(WritableRpcEngine.java:242)\nat com.sun.proxy.$Proxy9.ping(Unknown Source)\nat org.apache.hadoop.mapred.Task$TaskReporter.run(Task.java:767)\nat java.lang.Thread.run(Thread.java:748)\n\nJun 22, 2017 11:01:20 PM org.apache.hadoop.mapred.Task run\nINFO: Communication exception: java.io.IOException: The client is stopped\nat org.apache.hadoop.ipc.Client.getConnection(Client.java:1507)\nat org.apache.hadoop.ipc.Client.call(Client.java:1451)\nat org.apache.hadoop.ipc.Client.call(Client.java:1412)\nat\norg.apache.hadoop.ipc.WritableRpcEngine$Invoker.invoke(WritableRpcEngine.java:242)\nat com.sun.proxy.$Proxy9.ping(Unknown Source)\nat org.apache.hadoop.mapred.Task$TaskReporter.run(Task.java:767)\nat java.lang.Thread.run(Thread.java:748)\n\nJun 22, 2017 11:01:23 PM org.apache.hadoop.mapred.Task run\nINFO: Communication exception: java.io.IOException: The client is stopped\nat org.apache.hadoop.ipc.Client.getConnection(Client.java:1507)\nat org.apache.hadoop.ipc.Client.call(Client.java:1451)\nat org.apache.hadoop.ipc.Client.call(Client.java:1412)\nat\norg.apache.hadoop.ipc.WritableRpcEngine$Invoker.invoke(WritableRpcEngine.java:242)\nat com.sun.proxy.$Proxy9.ping(Unknown Source)\nat org.apache.hadoop.mapred.Task$TaskReporter.run(Task.java:767)\nat java.lang.Thread.run(Thread.java:748)\n\nJun 22, 2017 11:01:23 PM org.apache.hadoop.mapred.Task logThreadInfo\nINFO: Process Thread Dump: Communication exception\n12 active threads\nThread 35 (DestroyJavaVM):\n  State: RUNNABLE\n  Blocked count: 0\n  Waited count: 0\n  Stack:\nThread 33 (LeaseRenewer:kprasad@kprasad-ltm.internal.salesforce.com:8020):\n  State: TIMED_WAITING\n  Blocked count: 0\n  Waited count: 8\n  Stack:\n    java.lang.Thread.sleep(Native Method)\n    org.apache.hadoop.hdfs.LeaseRenewer.run(LeaseRenewer.java:444)\n    org.apache.hadoop.hdfs.LeaseRenewer.access$700(LeaseRenewer.java:71)\n    org.apache.hadoop.hdfs.LeaseRenewer$1.run(LeaseRenewer.java:304)\n    java.lang.Thread.run(Thread.java:748)\nThread 31 (IPC Client (1041365481) connection to\nkprasad-ltm.internal.salesforce.com/10.3.28.87:8020 from kprasad):\n  State: TIMED_WAITING\n  Blocked count: 2\n  Waited count: 3\n  Stack:\n    java.lang.Object.wait(Native Method)\n    org.apache.hadoop.ipc.Client$Connection.waitForWork(Client.java:933)\n    org.apache.hadoop.ipc.Client$Connection.run(Client.java:978)\nThread 29 (pool-5-thread-1):\n  State: TIMED_WAITING\n  Blocked count: 0\n  Waited count: 1\n  Stack:\n    java.lang.Thread.sleep(Native Method)\n    java.lang.Thread.sleep(Thread.java:340)\n    java.util.concurrent.TimeUnit.sleep(TimeUnit.java:386)\n\ngridforce.spark.delegate.SparkScriptRunner$KeepAliveThread.run(SparkScriptRunner.java:622)\n    java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\n    java.util.concurrent.FutureTask.run(FutureTask.java:266)\n\njava.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)\n\njava.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)\n\njava.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)\n\njava.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n    java.lang.Thread.run(Thread.java:748)\nThread 24 (org.apache.hadoop.hdfs.PeerCache@1c80e49b):\n  State: TIMED_WAITING\n  Blocked count: 0\n  Waited count: 23\n  Stack:\n    java.lang.Thread.sleep(Native Method)\n    org.apache.hadoop.hdfs.PeerCache.run(PeerCache.java:255)\n    org.apache.hadoop.hdfs.PeerCache.access$000(PeerCache.java:46)\n    org.apache.hadoop.hdfs.PeerCache$1.run(PeerCache.java:124)\n    java.lang.Thread.run(Thread.java:748)\nThread 22 (communication thread):\n  State: RUNNABLE\n  Blocked count: 20\n  Waited count: 63\n  Stack:\n    sun.management.ThreadImpl.getThreadInfo1(Native Method)\n    sun.management.ThreadImpl.getThreadInfo(ThreadImpl.java:178)\n    sun.management.ThreadImpl.getThreadInfo(ThreadImpl.java:139)\n\norg.apache.hadoop.util.ReflectionUtils.printThreadInfo(ReflectionUtils.java:168)\n\norg.apache.hadoop.util.ReflectionUtils.logThreadInfo(ReflectionUtils.java:223)\n    org.apache.hadoop.mapred.Task$TaskReporter.run(Task.java:785)\n    java.lang.Thread.run(Thread.java:748)\nThread 16 (process reaper):\n  State: TIMED_WAITING\n  Blocked count: 0\n  Waited count: 5\n  Stack:\n    sun.misc.Unsafe.park(Native Method)\n    java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)\n\njava.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)\n\njava.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:362)\n    java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:941)\n\njava.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1066)\n\njava.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1127)\n\njava.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n    java.lang.Thread.run(Thread.java:748)\nThread 14\n(org.apache.hadoop.fs.FileSystem$Statistics$StatisticsDataReferenceCleaner):\n  State: WAITING\n  Blocked count: 0\n  Waited count: 1\n  Waiting on java.lang.ref.ReferenceQueue$Lock@407a7f2a\n  Stack:\n    java.lang.Object.wait(Native Method)\n    java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:143)\n    java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:164)\n\norg.apache.hadoop.fs.FileSystem$Statistics$StatisticsDataReferenceCleaner.run(FileSystem.java:3060)\n    java.lang.Thread.run(Thread.java:748)\nThread 13 (IPC Parameter Sending Thread #0):\n  State: TIMED_WAITING\n  Blocked count: 0\n  Waited count: 31\n  Stack:\n    sun.misc.Unsafe.park(Native Method)\n    java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:215)\n\njava.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)\n\njava.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:362)\n    java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:941)\n\njava.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1066)\n\njava.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1127)\n\njava.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)\n    java.lang.Thread.run(Thread.java:748)\nThread 4 (Signal Dispatcher):\n  State: RUNNABLE\n  Blocked count: 0\n  Waited count: 0\n  Stack:\nThread 3 (Finalizer):\n  State: WAITING\n  Blocked count: 567\n  Waited count: 6\n  Waiting on java.lang.ref.ReferenceQueue$Lock@2cb2fc20\n  Stack:\n    java.lang.Object.wait(Native Method)\n    java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:143)\n    java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:164)\n    java.lang.ref.Finalizer$FinalizerThread.run(Finalizer.java:209)\nThread 2 (Reference Handler):\n  State: WAITING\n  Blocked count: 9\n  Waited count: 5\n  Waiting on java.lang.ref.Reference$Lock@4f4c4b1a\n  Stack:\n    java.lang.Object.wait(Native Method)\n    java.lang.Object.wait(Object.java:502)\n    java.lang.ref.Reference.tryHandlePending(Reference.java:191)\n    java.lang.ref.Reference$ReferenceHandler.run(Reference.java:153)\n\nJun 22, 2017 11:01:23 PM org.apache.hadoop.mapred.Task run\nWARNING: Last retry, killing attempt_1498171863687_0003_m_000000_0\n\n",
      "type": "Body",
      "meta": null
    }
  ],
  "meta": {},
  "id": "test/train_3823"
}